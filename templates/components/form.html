{% macro input(name, label, type='text', value='', placeholder='', required=false, class='', help_text='', error='') %}
<div class="{{ class }}">
    <label for="{{ name }}" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5">
        {{ label }}
        {% if required %}<span class="text-rose-500">*</span>{% endif %}
    </label>
    <input 
        type="{{ type }}" 
        name="{{ name }}" 
        id="{{ name }}" 
        value="{{ value }}"
        placeholder="{{ placeholder }}"
        {% if required %}required{% endif %}
        class="form-input dark:bg-slate-700 dark:text-white {{ 'border-rose-500 focus:ring-rose-500' if error else 'border-slate-300 dark:border-slate-600 focus:ring-primary' }}"
    >
    {% if help_text %}
    <p class="mt-1.5 text-xs text-slate-500 dark:text-slate-400">{{ help_text }}</p>
    {% endif %}
    {% if error %}
    <p class="mt-1.5 text-xs text-rose-600 dark:text-rose-400">{{ error }}</p>
    {% endif %}
</div>
{% endmacro %}

{% macro textarea(name, label, value='', placeholder='', rows=4, required=false, class='', help_text='', error='') %}
<div class="{{ class }}">
    <label for="{{ name }}" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5">
        {{ label }}
        {% if required %}<span class="text-rose-500">*</span>{% endif %}
    </label>
    <textarea 
        name="{{ name }}" 
        id="{{ name }}" 
        rows="{{ rows }}"
        placeholder="{{ placeholder }}"
        {% if required %}required{% endif %}
        class="form-textarea dark:bg-slate-700 dark:text-white {{ 'border-rose-500 focus:ring-rose-500' if error else 'border-slate-300 dark:border-slate-600 focus:ring-primary' }}"
    >{{ value }}</textarea>
    {% if help_text %}
    <p class="mt-1.5 text-xs text-slate-500 dark:text-slate-400">{{ help_text }}</p>
    {% endif %}
    {% if error %}
    <p class="mt-1.5 text-xs text-rose-600 dark:text-rose-400">{{ error }}</p>
    {% endif %}
</div>
{% endmacro %}

{% macro select(name, label, options=[], selected='', required=false, class='', help_text='', error='') %}
<div class="{{ class }}">
    <label for="{{ name }}" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5">
        {{ label }}
        {% if required %}<span class="text-rose-500">*</span>{% endif %}
    </label>
    <select 
        name="{{ name }}" 
        id="{{ name }}"
        {% if required %}required{% endif %}
        class="form-select dark:bg-slate-700 dark:text-white {{ 'border-rose-500 focus:ring-rose-500' if error else 'border-slate-300 dark:border-slate-600 focus:ring-primary' }}"
    >
        <option value="">Seleccionar...</option>
        {% for option in options %}
        <option value="{{ option.value }}" {% if option.value == selected %}selected{% endif %}>
            {{ option.label }}
        </option>
        {% endfor %}
    </select>
    {% if help_text %}
    <p class="mt-1.5 text-xs text-slate-500 dark:text-slate-400">{{ help_text }}</p>
    {% endif %}
    {% if error %}
    <p class="mt-1.5 text-xs text-rose-600 dark:text-rose-400">{{ error }}</p>
    {% endif %}
</div>
{% endmacro %}

{% macro checkbox(name, label, checked=false, class='') %}
<div class="{{ class }}">
    <label class="flex items-center gap-2 cursor-pointer">
        <input 
            type="checkbox" 
            name="{{ name }}" 
            {% if checked %}checked{% endif %}
            class="form-checkbox h-4 w-4 text-primary border-slate-300 dark:border-slate-600 rounded focus:ring-primary focus:ring-offset-0"
        >
        <span class="text-sm text-slate-700 dark:text-slate-300">{{ label }}</span>
    </label>
</div>
{% endmacro %}

{% macro form_group(class='') %}
<div class="{{ class }}">
    {{ caller() }}
</div>
{% endmacro %}

{% macro form_row(class='') %}
<div class="grid grid-cols-1 md:grid-cols-2 gap-4 {{ class }}">
    {{ caller() }}
</div>
{% endmacro %}

{% macro form_actions(submit_text='Guardar', cancel_href='', submit_class='') %}
<div class="flex items-center justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700">
    {% if cancel_href %}
    <a href="{{ cancel_href }}" class="px-4 py-2 text-sm font-medium text-slate-700 dark:text-slate-300 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-600 transition-colors">
        Cancelar
    </a>
    {% else %}
    <button type="button" onclick="history.back()" class="px-4 py-2 text-sm font-medium text-slate-700 dark:text-slate-300 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-600 transition-colors">
        Cancelar
    </button>
    {% endif %}
    <button type="submit" class="px-4 py-2 text-sm font-medium text-white bg-primary rounded-lg hover:bg-primary-dark transition-colors {{ submit_class }}">
        {{ submit_text }}
    </button>
</div>
{% endmacro %}

{% macro textarea(name, label, value='', placeholder='', rows=4, required=false, class='', help_text='', error='') %}
<div class="{{ class }}">
    <label for="{{ name }}" class="block text-sm font-medium text-slate-700 mb-1.5">
        {{ label }}
        {% if required %}<span class="text-rose-500">*</span>{% endif %}
    </label>
    <textarea 
        name="{{ name }}" 
        id="{{ name }}" 
        rows="{{ rows }}"
        placeholder="{{ placeholder }}"
        {% if required %}required{% endif %}
        class="form-textarea {{ 'border-rose-500 focus:ring-rose-500' if error else 'border-slate-300 focus:ring-primary' }}"
    >{{ value }}</textarea>
    {% if help_text %}
    <p class="mt-1.5 text-xs text-slate-500">{{ help_text }}</p>
    {% endif %}
    {% if error %}
    <p class="mt-1.5 text-xs text-rose-600">{{ error }}</p>
    {% endif %}
</div>
{% endmacro %}

{% macro select(name, label, options=[], selected='', required=false, class='', help_text='', error='') %}
<div class="{{ class }}">
    <label for="{{ name }}" class="block text-sm font-medium text-slate-700 mb-1.5">
        {{ label }}
        {% if required %}<span class="text-rose-500">*</span>{% endif %}
    </label>
    <select 
        name="{{ name }}" 
        id="{{ name }}"
        {% if required %}required{% endif %}
        class="form-select {{ 'border-rose-500 focus:ring-rose-500' if error else 'border-slate-300 focus:ring-primary' }}"
    >
        <option value="">Seleccionar...</option>
        {% for option in options %}
        <option value="{{ option.value }}" {% if option.value == selected %}selected{% endif %}>
            {{ option.label }}
        </option>
        {% endfor %}
    </select>
    {% if help_text %}
    <p class="mt-1.5 text-xs text-slate-500">{{ help_text }}</p>
    {% endif %}
    {% if error %}
    <p class="mt-1.5 text-xs text-rose-600">{{ error }}</p>
    {% endif %}
</div>
{% endmacro %}

{% macro checkbox(name, label, checked=false, class='') %}
<div class="{{ class }}">
    <label class="flex items-center gap-2 cursor-pointer">
        <input 
            type="checkbox" 
            name="{{ name }}" 
            {% if checked %}checked{% endif %}
            class="form-checkbox h-4 w-4 text-primary border-slate-300 rounded focus:ring-primary"
        >
        <span class="text-sm text-slate-700">{{ label }}</span>
    </label>
</div>
{% endmacro %}

{% macro form_group(class='') %}
<div class="{{ class }}">
    {{ caller() }}
</div>
{% endmacro %}

{% macro form_row(class='') %}
<div class="grid grid-cols-1 md:grid-cols-2 gap-4 {{ class }}">
    {{ caller() }}
</div>
{% endmacro %}

{% macro form_actions(submit_text='Guardar', cancel_href='', submit_class='') %}
<div class="flex items-center justify-end gap-3 pt-4 border-t border-slate-200">
    {% if cancel_href %}
    <a href="{{ cancel_href }}" class="px-4 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors">
        Cancelar
    </a>
    {% else %}
    <button type="button" onclick="history.back()" class="px-4 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors">
        Cancelar
    </button>
    {% endif %}
    <button type="submit" class="px-4 py-2 text-sm font-medium text-white bg-primary rounded-lg hover:bg-primary-dark transition-colors {{ submit_class }}">
        {{ submit_text }}
    </button>
</div>
{% endmacro %}

<style>
.form-input,
.form-textarea,
.form-select {
    @apply block w-full rounded-lg border px-3 py-2 text-sm transition-colors focus:outline-none focus:ring-2 focus:ring-offset-0;
}
.form-input:focus,
.form-textarea:focus,
.form-select:focus {
    @apply border-primary ring-2 ring-primary/20;
}
.form-checkbox {
    @apply rounded border-slate-300 text-primary focus:ring-primary focus:ring-offset-0;
}
</style>
